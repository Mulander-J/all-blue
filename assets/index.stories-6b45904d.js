import{S as B,i as z,s as F,e as y,f as G,a as f,m as w,b as J,c as v,l as X,n as b,d as K,r as N,o as Q,k as M}from"./index-a39d685e.js";function R(){let o=block.clientWidth,t=block.clientHeight,n=window.innerWidth,r=window.innerHeight;return{x:Math.round(n/2-o/2),y:Math.round(r/2-t/2)}}function V(o){let{pageX:t,pageY:n,screenX:r,screenY:e}=o,a=0,l=0,i=r-window.screenLeft,d=e-window.screenTop;for(;i>t;)a++,i--;for(;d>n;)l++,d--;return[a,l]}function g(o,t,n){let{x:r,y:e}=t,{screenLeft:a,screenTop:l}=window,[i,d]=n;switch(o){case"p2s":return{x:r+a+i,y:e+l+d};case"s2p":return{x:r-a-i,y:e-l-d};default:return console.error("转换失败：类型错误"),{x:0,y:0}}}function Z(o){let t=o.data;return t&&t.type?t:{type:"",data:null}}function $(o){let t,n,r,e,a,l;return{c(){t=y("div"),n=y("div"),r=G(),e=y("div"),e.innerHTML="<span>Initial</span>",f(n,"id","block"),f(n,"class","block"),f(n,"role","none"),w(n,"left","0px"),w(n,"top","0px"),f(e,"id","init-btn"),f(e,"class","init-btn"),f(e,"role","none"),w(t,"min-height","500px"),w(t,"width","100%")},m(i,d){J(i,t,d),v(t,n),o[4](n),v(t,r),v(t,e),o[5](e),a||(l=[X(n,"mousedown",o[2]),X(e,"click",o[3])],a=!0)},p:b,i:b,o:b,d(i){i&&K(t),o[4](null),o[5](null),a=!1,N(l)}}}function ee(o,t,n){let r,e,a=new BroadcastChannel("DataTransfer"),l=0,i=0;function d(s){console.log("[AdjustOffset]",s),l=s.x,i=s.y,r&&r.remove()}function x(s){let{x:c,y:p}=s;n(1,e.style.left=c+"px",e),n(1,e.style.top=p+"px",e)}function h(s){let c=g("s2p",s,[l,i]);x(c)}function H(s){let c=g("p2s",{x:parseInt(e.style.left),y:parseInt(e.style.top)},[l,i]),p=c.x,u=c.y,W=s.screenX,D=s.screenY,Y=function(k){let P=p+(k.screenX-W),q=u+(k.screenY-D),C={x:P,y:q};h(C),a.postMessage({type:"UpdateCoords",data:C})},_=function(){window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",_)};window.addEventListener("mousemove",Y),window.addEventListener("mouseup",_)}const U=function(s){const[c,p]=V(s);d({x:c,y:p}),a.postMessage({type:"AdjustOffset",data:{x:c,y:p}});let u=g("p2s",{x:parseInt(e.style.left),y:parseInt(e.style.top)},[c,p]);h(u),a.postMessage({type:"UpdateCoords",data:u})};Q(()=>{r.focus(),e.focus();const s=R();x(s),a.addEventListener("message",function(c){let{data:p,type:u}=Z(c);switch(u){case"AdjustOffset":d(p);break;case"UpdateCoords":h(p);break}})});function j(s){M[s?"unshift":"push"](()=>{e=s,n(1,e)})}function A(s){M[s?"unshift":"push"](()=>{r=s,n(0,r)})}return[r,e,H,U,j,A]}class I extends B{constructor(t){super(),z(this,t,ee,$,F,{})}}const te=I;I.__docgen={version:3,name:"TabSync.svelte",data:[],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};const se={component:te,tags:["autodocs"],parameters:{docs:{description:{component:`Moving elements across tabs / Svelte

**Original:[云雨YunYan](https://www.bilibili.com/read/cv25534268/)**`}}}},m={};var E,S,L,O,T;m.parameters={...m.parameters,docs:{...(E=m.parameters)==null?void 0:E.docs,source:{originalSource:`{
  // args: {}
}`,...(L=(S=m.parameters)==null?void 0:S.docs)==null?void 0:L.source},description:{story:"> Open multiple tabs, click & drag the white block. See what magic show.",...(T=(O=m.parameters)==null?void 0:O.docs)==null?void 0:T.description}}};const oe=["Preview"];export{m as Preview,oe as __namedExportsOrder,se as default};
//# sourceMappingURL=index.stories-6b45904d.js.map
