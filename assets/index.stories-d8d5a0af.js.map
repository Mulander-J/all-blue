{"version":3,"file":"index.stories-d8d5a0af.js","sources":["../../src/stories/@reproduce/ToggleTheme/ToggleTheme.svelte"],"sourcesContent":["<script>\n  import { RandomText } from \"../../../constant\";\n  import \"./index.scss\";\n\n  let isDark\n  \n  const getDark = () => /dark/i.test(document.documentElement?.className);\n  const toggleTheme = () => {\n    isDark = getDark();\n    console.log('isDark', isDark)\n    if (isDark) {\n      document.documentElement.classList.remove(\"dark\");\n      document.documentElement.classList.add(\"light\");\n    } else {\n      document.documentElement.classList.remove(\"light\");\n      document.documentElement.classList.add(\"dark\");\n    }\n  };\n\n  const handleToggle = (event) => {\n    // Fallback for browsers that donâ€™t support this API:\n    if (!document?.startViewTransition) {\n      toggleTheme();\n      return;\n    }\n\n    const x = event.clientX;\n    const y = event.clientY;\n    \n    const endRadius = Math.hypot(\n      Math.max(x, document.querySelector(\"#box\").clientWidth - x),\n      Math.max(y, document.querySelector(\"#box\").clientHeight - y)\n    );\n\n    console.log('sda', endRadius)\n\n    const transition = document.startViewTransition(toggleTheme);\n\n    transition.ready.then(() => {\n      console.log('issss', isDark)\n      const clipPath = [\n        `circle(0px at ${x}px ${y}px)`,\n        `circle(${endRadius}px at ${x}px ${y}px)`,\n      ];\n      document.documentElement.animate(\n        {\n          clipPath: isDark ? [...clipPath].reverse() : clipPath,\n        },\n        {\n          duration: 500,\n          easing: \"ease-in\",\n          pseudoElement: isDark\n            ? \"::view-transition-old(root)\"\n            : \"::view-transition-new(root)\",\n        }\n      );\n    });\n  };\n</script>\n\n<div id=\"box\" on:click={handleToggle} role=\"presentation\">\n  <div class=\"p-10 border-2 bg-white text-black dark:text-white dark:bg-black\">\n    <p>{RandomText}</p>\n  </div>\n</div>\n"],"names":["RandomText","insert","target","div1","anchor","append","div0","p","ctx","isDark","getDark","_a","toggleTheme","event","x","y","endRadius","clipPath"],"mappings":"iOA8DQA,CAAU,qIAFlBC,EAIMC,EAAAC,EAAAC,CAAA,EAHJC,EAEMF,EAAAG,CAAA,EADJD,EAAmBC,EAAAC,CAAA,oBAFCC,EAAY,CAAA,CAAA,+DAxD9BC,QAEEC,EAAO,IAAA,OAAS,cAAQ,MAAKC,EAAA,SAAS,kBAAT,YAAAA,EAA0B,SAAS,GAChEC,EAAW,IAAA,CACfH,EAASC,EAAO,EAChB,QAAQ,IAAI,SAAUD,CAAM,EACxBA,GACF,SAAS,gBAAgB,UAAU,OAAO,MAAM,EAChD,SAAS,gBAAgB,UAAU,IAAI,OAAO,IAE9C,SAAS,gBAAgB,UAAU,OAAO,OAAO,EACjD,SAAS,gBAAgB,UAAU,IAAI,MAAM,WAI3BI,GAAK,CAEpB,GAAA,EAAA,yBAAU,qBAAmB,CAChCD,iBAIIE,EAAID,EAAM,QACVE,EAAIF,EAAM,QAEVG,EAAY,KAAK,MACrB,KAAK,IAAIF,EAAG,SAAS,cAAc,MAAM,EAAE,YAAcA,CAAC,EAC1D,KAAK,IAAIC,EAAG,SAAS,cAAc,MAAM,EAAE,aAAeA,CAAC,CAAA,EAG7D,QAAQ,IAAI,MAAOC,CAAS,EAET,SAAS,oBAAoBJ,CAAW,EAEhD,MAAM,KAAI,IAAA,CACnB,QAAQ,IAAI,QAASH,CAAM,QACrBQ,EAAQ,CAAA,iBACKH,CAAC,MAAMC,CAAC,gBACfC,CAAS,SAASF,CAAC,MAAMC,CAAC,KAAA,EAEtC,SAAS,gBAAgB,SAErB,SAAUN,EAAM,CAAA,GAAOQ,CAAQ,EAAE,UAAYA,IAG7C,SAAU,IACV,OAAQ,UACR,cAAeR,EACX,8BACA"}